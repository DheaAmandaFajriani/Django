{% extends "main.html" %}

{% block content %}
{% comment %} <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> {% endcomment %}
 <script src="https://unpkg.com/htmx.org@1.9.2"></script>
 <div class="col-md-12">
    <form method="POST" id="KontrakForm"  class ="post-form" action="/addkontrak">
     {% csrf_token %}
      {% comment %} {{form.as_p}}  {% endcomment %}
     <div class="container">
        <div class= "col-12">
            <h3> Isi data Kontrak mhs</h3>
        </div> 

        <div class="mb-3">
         <label> id Kontrak :</label>
         {{form.id_kontrak}}
        </div>

        <div class="mb-3">
         <label> Mahasiswa :</label>
         {{form.id_mhs}}
        </div>

        <div class="mb-3">
         <label> Dosen pengajar :</label>
        {{form.id_dosen}}
        </div>

        <div class="mb-3">
         <label> Mata kuliah :</label>
         {{form.id_matkul}}
        </div>
   
        
        <div class="mb-3">
         <button type="submit" class="btn btn-primary">
            submit</button>
        </div>


    </div>
    </form>
</div>

{% comment %} <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
    $("#id_dosen").change(function() {  // Pastikan ID ini sesuai dengan elemen yang benar
        var url = "ajax/load-cities/";  // Pastikan URL ini sesuai dengan URL yang benar di `urls.py`
        var dosenId = $(this).val();

        console.log("Dosen ID:", dosenId);

        $.ajax({
            url: url,
            data: {
                'id_dosen': dosenId
            },
            success: function(data) {
                console.log("Data matkul diterima:", data);
                $("#id_matkul").html("");  // Kosongkan dropdown `matkul`
                $.each(data, function(key, value) {
                    $("#id_matkul").append('<option value="' + value.id_dosen + '">' + value.nama + '</option>');
                });
            },
            error: function(xhr, status, error) {
                console.error("Error AJAX:", error);
            }
        });
    });
</script> {% endcomment %}

{% endblock content %}





